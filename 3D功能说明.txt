=================================================================
瀛州纪 - 3D世界功能说明
=================================================================

🎮 新功能：3D赛博世界

现在瀛州纪支持两种视图模式：
1. 🌐 3D世界 - 第一人称探索赛博空间
2. 📋 管理面板 - 传统的2D UI界面

-----------------------------------------------------------------
🚀 如何使用
-----------------------------------------------------------------

1. 安装新依赖
   
   cd 瀛州纪
   npm install

   这会自动安装：
   - @babylonjs/core@^7.0.0 (3D引擎)
   - @babylonjs/loaders@^7.0.0 (模型加载)
   - cannon-es@^0.20.0 (物理引擎)

2. 启动开发服务器

   npm run dev

3. 访问 http://localhost:3000

4. 连接钱包并创建数字生命

5. 创建完成后，默认进入3D世界！

-----------------------------------------------------------------
🎯 3D世界控制
-----------------------------------------------------------------

键盘控制：
  W/A/S/D  - 前后左右移动
  鼠标移动 - 转动视角
  E 键     - 与NPC交互
  Tab 键   - 切换到2D管理面板

-----------------------------------------------------------------
🌟 3D世界特性
-----------------------------------------------------------------

✨ 环境：
  - 赛博朋克风格的网格地面
  - 发光粒子效果
  - 中央世界账本结构（旋转能量环）
  - 深空天空盒

🤖 NPC实体：
  - 史官（青色） - 位于西北方
  - 构筑师（橙色） - 位于东北方
  - 预言者（紫色） - 位于北方
  - 商人（黄色） - 位于南方

💬 交互：
  - 靠近NPC按 E 键交互
  - 弹出对话框，与AI-NPC对话
  - 对话系统与区块链完全集成

🔄 无缝切换：
  - 3D世界中按 Tab 切换到2D面板
  - 2D面板中点击"3D世界"按钮返回
  - 状态保持同步

-----------------------------------------------------------------
🎨 视觉效果
-----------------------------------------------------------------

- 发光层效果（GlowLayer）
- 实时粒子系统
- 物理碰撞检测
- 第一人称相机
- 赛博朋克配色方案

-----------------------------------------------------------------
📊 性能优化
-----------------------------------------------------------------

- 动态导入（lazy loading）
- 仅客户端渲染（CSR）
- 自适应渲染
- 物理引擎优化

-----------------------------------------------------------------
⚠️ 注意事项
-----------------------------------------------------------------

1. 首次加载可能需要几秒钟（加载3D资源）
2. 需要现代浏览器支持WebGL
3. 推荐使用Chrome/Edge/Firefox
4. 移动端目前不支持（需要键盘鼠标控制）

-----------------------------------------------------------------
🛠️ 技术栈
-----------------------------------------------------------------

前端：
  - Next.js 14
  - React 18
  - TypeScript
  - TailwindCSS

3D引擎：
  - Babylon.js 7.0
  - Cannon-es 0.20

区块链：
  - Ethers.js 6
  - Hardhat
  - MetaMask

-----------------------------------------------------------------
🐛 故障排除
-----------------------------------------------------------------

问题：3D世界白屏/黑屏
解决：
  1. 检查浏览器控制台错误
  2. 确认已安装所有依赖（npm install）
  3. 清除浏览器缓存
  4. 尝试其他浏览器

问题：无法移动
解决：
  1. 点击画面确保获得焦点
  2. 检查键盘是否正常
  3. 查看控制台是否有错误

问题：NPC不显示
解决：
  1. 等待场景完全加载
  2. 向四周移动查找NPC
  3. 检查WebGL是否启用

-----------------------------------------------------------------
📱 未来功能
-----------------------------------------------------------------

计划中：
  - 移动端触摸控制支持
  - 更多NPC和环境
  - 多人在线（链上同步）
  - VR支持
  - 自定义角色外观
  - 建筑系统

-----------------------------------------------------------------
💡 开发者提示
-----------------------------------------------------------------

3D场景代码位置：
  components/Scene3D/BabylonScene.tsx  - Babylon包装器
  components/Scene3D/YingzhouWorld.tsx - 主世界逻辑

修改NPC：
  在 YingzhouWorld.tsx 的 createNPCEntities 函数中

修改环境：
  在 YingzhouWorld.tsx 的各个 create* 函数中

-----------------------------------------------------------------

✨ 享受你的3D赛博之旅！ ✨

=================================================================

