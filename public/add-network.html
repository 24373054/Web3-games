<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·»åŠ  Hardhat ç½‘ç»œ - ç€›å·çºª</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .container {
            background: #2a2a2a;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        h1 {
            color: #00ffff;
            margin-bottom: 20px;
        }
        .info-box {
            background: #1a1a1a;
            border: 1px solid #00ffff;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            font-family: monospace;
        }
        .info-box div {
            margin: 8px 0;
        }
        .label {
            color: #888;
            display: inline-block;
            width: 150px;
        }
        .value {
            color: #00ffff;
        }
        button {
            background: linear-gradient(135deg, #00ffff 0%, #0088ff 100%);
            color: #000;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: transform 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
        }
        button:disabled {
            background: #555;
            cursor: not-allowed;
        }
        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .status.success {
            background: #00ff0020;
            border: 1px solid #00ff00;
            color: #00ff00;
        }
        .status.error {
            background: #ff000020;
            border: 1px solid #ff0000;
            color: #ff0000;
        }
        .steps {
            margin: 20px 0;
            padding-left: 20px;
        }
        .steps li {
            margin: 10px 0;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”— æ·»åŠ  Hardhat æœ¬åœ°ç½‘ç»œ</h1>
        
        <div class="info-box">
            <div><span class="label">ç½‘ç»œåç§°:</span> <span class="value">Hardhat Local</span></div>
            <div><span class="label">RPC URL:</span> <span class="value">http://127.0.0.1:8545</span></div>
            <div><span class="label">Chain ID:</span> <span class="value">31337</span></div>
            <div><span class="label">è´§å¸ç¬¦å·:</span> <span class="value">ETH</span></div>
        </div>

        <button id="addNetworkBtn" onclick="addNetwork()">
            ğŸ¦Š ä¸€é”®æ·»åŠ åˆ° MetaMask
        </button>

        <div id="status"></div>

        <h2 style="margin-top: 40px; color: #00ffff;">ğŸ“‹ æ‰‹åŠ¨æ·»åŠ æ­¥éª¤</h2>
        <ol class="steps">
            <li>æ‰“å¼€ MetaMask æ‰©å±•</li>
            <li>ç‚¹å‡»å³ä¸Šè§’çš„ç½‘ç»œä¸‹æ‹‰èœå•</li>
            <li>ç‚¹å‡»"æ·»åŠ ç½‘ç»œ"æˆ–"Add network"</li>
            <li>ç‚¹å‡»"æ‰‹åŠ¨æ·»åŠ ç½‘ç»œ"</li>
            <li>å¡«å†™ä¸Šæ–¹æ˜¾ç¤ºçš„ç½‘ç»œä¿¡æ¯</li>
            <li>ç‚¹å‡»"ä¿å­˜"</li>
            <li>MetaMask ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°æ–°ç½‘ç»œ</li>
        </ol>

        <h2 style="margin-top: 40px; color: #00ffff;">ğŸ”‘ æµ‹è¯•è´¦æˆ·</h2>
        <div class="info-box">
            <div><span class="label">åœ°å€:</span></div>
            <div class="value" style="word-break: break-all;">0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266</div>
            <div style="margin-top: 10px;"><span class="label">ç§é’¥:</span></div>
            <div class="value" style="word-break: break-all;">0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80</div>
            <div style="margin-top: 10px;"><span class="label">ä½™é¢:</span> <span class="value">10000 ETH</span></div>
        </div>
    </div>

    <script>
        async function addNetwork() {
            const button = document.getElementById('addNetworkBtn');
            const statusDiv = document.getElementById('status');
            
            if (typeof window.ethereum === 'undefined') {
                statusDiv.className = 'status error';
                statusDiv.textContent = 'âŒ æœªæ£€æµ‹åˆ° MetaMaskï¼Œè¯·å…ˆå®‰è£… MetaMask æ‰©å±•';
                return;
            }

            button.disabled = true;
            button.textContent = 'æ­£åœ¨æ·»åŠ ...';
            statusDiv.textContent = '';

            try {
                await window.ethereum.request({
                    method: 'wallet_addEthereumChain',
                    params: [{
                        chainId: '0x7A69', // 31337 in hex
                        chainName: 'Hardhat Local',
                        nativeCurrency: {
                            name: 'Ether',
                            symbol: 'ETH',
                            decimals: 18
                        },
                        rpcUrls: ['http://127.0.0.1:8545'],
                        blockExplorerUrls: null
                    }]
                });

                statusDiv.className = 'status success';
                statusDiv.innerHTML = 'âœ… ç½‘ç»œæ·»åŠ æˆåŠŸ!<br>MetaMask å·²è‡ªåŠ¨åˆ‡æ¢åˆ° Hardhat Local ç½‘ç»œ<br><br>ç°åœ¨å¯ä»¥è¿”å›ä¸»é¡µè¿æ¥é’±åŒ…äº†';
                button.textContent = 'âœ… æ·»åŠ æˆåŠŸ';
                
                setTimeout(() => {
                    window.location.href = '/';
                }, 3000);
                
            } catch (error) {
                console.error('æ·»åŠ ç½‘ç»œå¤±è´¥:', error);
                statusDiv.className = 'status error';
                
                if (error.code === 4001) {
                    statusDiv.textContent = 'âŒ ç”¨æˆ·å–æ¶ˆäº†æ“ä½œ';
                } else if (error.code === -32002) {
                    statusDiv.textContent = 'âš ï¸ è¯·åœ¨ MetaMask ä¸­ç¡®è®¤å¾…å¤„ç†çš„è¯·æ±‚';
                } else {
                    statusDiv.textContent = 'âŒ æ·»åŠ å¤±è´¥: ' + error.message + '\n\nè¯·å°è¯•æ‰‹åŠ¨æ·»åŠ ';
                }
                
                button.disabled = false;
                button.textContent = 'ğŸ¦Š ä¸€é”®æ·»åŠ åˆ° MetaMask';
            }
        }

        // æ£€æŸ¥æ˜¯å¦å·²ç»åœ¨æ­£ç¡®çš„ç½‘ç»œ
        window.addEventListener('load', async () => {
            if (typeof window.ethereum !== 'undefined') {
                try {
                    const chainId = await window.ethereum.request({ method: 'eth_chainId' });
                    if (chainId === '0x7A69') {
                        const statusDiv = document.getElementById('status');
                        statusDiv.className = 'status success';
                        statusDiv.innerHTML = 'âœ… æ‚¨å·²ç»è¿æ¥åˆ° Hardhat Local ç½‘ç»œ!<br>å¯ä»¥è¿”å›ä¸»é¡µè¿æ¥é’±åŒ…äº†';
                    }
                } catch (error) {
                    console.error('æ£€æŸ¥ç½‘ç»œå¤±è´¥:', error);
                }
            }
        });
    </script>
</body>
</html>
