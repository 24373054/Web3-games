# ğŸ”§ å¿«é€Ÿä¿®å¤æŒ‡å—

## ğŸ” å¿«é€Ÿè¯Šæ–­å·¥å…·

**è®¿é—®è¯Šæ–­é¡µé¢ï¼šhttp://localhost:3000/debug**

è¿™ä¸ªé¡µé¢ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼š
- âœ… ç¯å¢ƒå˜é‡é…ç½®
- âœ… RPC è¿æ¥çŠ¶æ€
- âœ… MetaMask ç½‘ç»œ
- âœ… åˆçº¦éƒ¨ç½²çŠ¶æ€
- âœ… ç½‘ç»œåŒ¹é…æƒ…å†µ

å¹¶ç»™å‡ºå…·ä½“çš„ä¿®å¤å»ºè®®ï¼

---

## âŒ é”™è¯¯ï¼š`could not decode result data (value="0x")`

### åŸå› 
åˆçº¦æœªéƒ¨ç½²æˆ– `.env.local` é…ç½®é”™è¯¯ï¼Œæˆ– **MetaMask è¿æ¥åˆ°äº†é”™è¯¯çš„ç½‘ç»œ**

### ğŸš€ è§£å†³æ–¹æ¡ˆï¼ˆ3æ­¥ï¼‰

#### æ–¹æ³•ä¸€ï¼šä¸€é”®ä¿®å¤ï¼ˆæ¨èï¼‰

**1. å¯åŠ¨ Hardhat èŠ‚ç‚¹ï¼ˆå¦‚æœæœªè¿è¡Œï¼‰**
```bash
npx hardhat node
```
ä¿æŒæ­¤ç»ˆç«¯è¿è¡Œï¼

**2. è¿è¡Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬**
```bash
npm run deploy:auto
```

**3. éªŒè¯é…ç½®**
```bash
npm run check
```

**4. é‡å¯å‰ç«¯**
```bash
npm run dev
```

---

#### æ–¹æ³•äºŒï¼šä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆWindowsï¼‰

**1. å¯åŠ¨èŠ‚ç‚¹**
```bash
npx hardhat node
```

**2. åŒå‡»è¿è¡Œ**
```
ä¸€é”®éƒ¨ç½².bat
```

**3. åŒå‡»è¿è¡Œ**
```
ä¸€é”®å¯åŠ¨å‰ç«¯.bat
```

---

## ğŸ¯ npm å‘½ä»¤é€ŸæŸ¥è¡¨

| å‘½ä»¤ | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| `npm run deploy:auto` | ğŸš€ **è‡ªåŠ¨éƒ¨ç½²** | éƒ¨ç½²åˆçº¦ + è‡ªåŠ¨æ›´æ–°é…ç½®æ–‡ä»¶ |
| `npm run check` | ğŸ” æ£€æŸ¥ç¯å¢ƒ | éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡® |
| `npm run dev` | ğŸŒ å¯åŠ¨å‰ç«¯ | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ |
| `npm run compile` | ğŸ“ ç¼–è¯‘åˆçº¦ | ç¼–è¯‘ Solidity åˆçº¦ |
| `npm test` | âœ… è¿è¡Œæµ‹è¯• | æµ‹è¯•æ™ºèƒ½åˆçº¦ |

---

## âš¡ å¸¸è§é”™è¯¯é€ŸæŸ¥

### 1ï¸âƒ£ MetaMask: "Nonce too high"

**åŸå› **ï¼šé‡å¯äº† Hardhat èŠ‚ç‚¹

**è§£å†³**ï¼š
1. MetaMask â†’ è®¾ç½® â†’ é«˜çº§
2. æ¸…é™¤æ´»åŠ¨æ•°æ®å’Œ Nonce
3. åˆ·æ–°é¡µé¢

---

### 2ï¸âƒ£ "ç¼ºå°‘ NEXT_PUBLIC_RPC_URL ç¯å¢ƒå˜é‡"

**è§£å†³**ï¼š
```bash
npm run deploy:auto
```

---

### 3ï¸âƒ£ "Only governor can call"

**åŸå› **ï¼šå½“å‰è´¦æˆ·ä¸æ˜¯åˆçº¦éƒ¨ç½²è€…

**è§£å†³**ï¼š
- åˆ‡æ¢åˆ°éƒ¨ç½²åˆçº¦çš„è´¦æˆ·ï¼ˆHardhat èŠ‚ç‚¹è¾“å‡ºçš„ç¬¬ä¸€ä¸ªè´¦æˆ·ï¼‰
- æˆ–ä½¿ç”¨ `hardhat console` è°ƒç”¨å—ä¿æŠ¤çš„å‡½æ•°

---

### 4ï¸âƒ£ RPC è¿æ¥å¤±è´¥

**æ£€æŸ¥æ¸…å•**ï¼š
- âœ… `npx hardhat node` æ­£åœ¨è¿è¡Œ
- âœ… RPC URL: `http://127.0.0.1:8545`
- âœ… ç«¯å£ 8545 æœªè¢«å ç”¨

**æµ‹è¯•è¿æ¥**ï¼š
```bash
npm run check
```

---

### 5ï¸âƒ£ åˆçº¦åœ°å€æ— æ•ˆ

**è§£å†³**ï¼š
```bash
# é‡æ–°éƒ¨ç½²å¹¶æ›´æ–°é…ç½®
npm run deploy:auto

# éªŒè¯
npm run check
```

---

## ğŸ“‹ å®Œæ•´å¯åŠ¨æµç¨‹

```bash
# ç»ˆç«¯ 1: å¯åŠ¨æœ¬åœ°é“¾
npx hardhat node

# ç»ˆç«¯ 2: éƒ¨ç½²åˆçº¦
npm run deploy:auto

# ç»ˆç«¯ 2: éªŒè¯é…ç½®
npm run check

# ç»ˆç«¯ 2: å¯åŠ¨å‰ç«¯
npm run dev
```

è®¿é—®ï¼šhttp://localhost:3000

---

## ğŸ® MetaMask é…ç½®

```
ç½‘ç»œåç§°: Hardhat Local
RPC URL:  http://127.0.0.1:8545
Chain ID: 31337
è´§å¸ç¬¦å·: ETH
```

---

## ğŸ’¡ è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯
æ‰“å¼€æµè§ˆå™¨ F12 â†’ Consoleï¼ŒæŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

### æ£€æŸ¥ .env.local æ–‡ä»¶
```bash
# Windows
type .env.local

# Linux/Mac
cat .env.local
```

### æ‰‹åŠ¨æµ‹è¯• RPC è¿æ¥
```bash
curl http://127.0.0.1:8545 -X POST -H "Content-Type: application/json" --data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}'
```

### Hardhat Console äº¤äº’
```bash
npx hardhat console --network localhost
```

```javascript
// è·å–åˆçº¦å®ä¾‹
const WorldLedger = await ethers.getContractFactory("WorldLedger")
const wl = await WorldLedger.attach("0x5FbDB2315678afecb367f032d93F642f64180aa3")

// æŸ¥è¯¢çŠ¶æ€
await wl.currentState()
await wl.getWorldAge()
await wl.getEntropyLevel()
```

---

## ğŸ†˜ ä»ç„¶æ— æ³•è§£å†³ï¼Ÿ

### å®Œå…¨é‡ç½®

```bash
# 1. åœæ­¢æ‰€æœ‰æœåŠ¡ï¼ˆCtrl+Cï¼‰

# 2. æ¸…ç† Hardhat ç¼“å­˜
rm -rf artifacts cache

# 3. é‡æ–°ç¼–è¯‘
npm run compile

# 4. é‡æ–°å¯åŠ¨èŠ‚ç‚¹ï¼ˆæ–°ç»ˆç«¯ï¼‰
npx hardhat node

# 5. é‡æ–°éƒ¨ç½²ï¼ˆæ–°ç»ˆç«¯ï¼‰
npm run deploy:auto

# 6. é‡å¯å‰ç«¯
npm run dev

# 7. é‡ç½® MetaMask Nonce
# MetaMask â†’ è®¾ç½® â†’ é«˜çº§ â†’ æ¸…é™¤æ´»åŠ¨æ•°æ®
```

---

## ğŸ“ è·å–æ›´å¤šå¸®åŠ©

- ğŸ“– å®Œæ•´æ–‡æ¡£ï¼š[README.md](./README.md)
- ğŸš€ å¿«é€Ÿå¼€å§‹ï¼š[å¿«é€Ÿå¼€å§‹æŒ‡å—.md](./å¿«é€Ÿå¼€å§‹æŒ‡å—.md)
- ğŸ“‹ ä½¿ç”¨è¯´æ˜ï¼š[ä¸€é”®éƒ¨ç½²è¯´æ˜.md](./ä¸€é”®éƒ¨ç½²è¯´æ˜.md)
- ğŸ—ï¸ é¡¹ç›®ç»“æ„ï¼š[PROJECT_STRUCTURE.md](./PROJECT_STRUCTURE.md)

---

**è®°ä½è¿™ä¸‰ä¸ªå‘½ä»¤ï¼š**
1. `npx hardhat node` - å¯åŠ¨æœ¬åœ°é“¾
2. `npm run deploy:auto` - éƒ¨ç½²å¹¶é…ç½®
3. `npm run dev` - å¯åŠ¨å‰ç«¯

âœ¨ é—®é¢˜é€šå¸¸é€šè¿‡é‡æ–°éƒ¨ç½²å³å¯è§£å†³ï¼

