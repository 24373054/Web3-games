# 调试指南

## 如果看到黑屏

### 第一步：检查浏览器控制台

1. 按 `F12` 打开开发者工具
2. 切换到 Console（控制台）标签
3. 查看是否有红色错误信息

### 常见问题和解决方案

#### 问题1：模块加载失败
如果看到 `Failed to resolve module` 或 `Cannot find module` 错误：

```bash
# 重新安装依赖
npm install
```

#### 问题2：Cannon.js 导入错误
如果看到 `CANNON is not defined` 错误：

检查 `package.json` 中是否正确安装了 cannon 包。

#### 问题3：场景没有渲染
如果控制台没有错误，但画面是黑色的：

1. 检查是否点击了"进入瀛州"按钮
2. 查看控制台是否输出了以下信息：
   - "初始化游戏..."
   - "场景已创建"
   - "物理引擎已启用"
   - "游戏初始化完成！"

### 快速测试

打开 `test.html` 文件来测试 Babylon.js 是否正常工作：

```bash
# 在浏览器中打开
http://localhost:3000/test.html
```

如果 test.html 能看到一个青色立方体，说明 Babylon.js 工作正常。

### 预期的控制台输出

正常启动时，控制台应该输出：

```
初始化游戏...
场景已创建
物理引擎已启用
创建世界环境...
创建地面...
地面已创建
网格线已创建
创建天空盒...
天空盒已创建
创建装饰立方体...
初始化玩家...
玩家地址: 0x...
玩家物理体已创建，初始位置: ...
玩家创建完成
初始化实体系统...
初始化对话系统...
初始化世界毁灭系统...
生成初始实体...
生成实体 1/8 位置: ...
...
共生成 8 个实体
游戏初始化完成！
```

### 如果还是黑屏

尝试使用简化版本：

1. 在浏览器中打开 `test.html`
2. 如果 test.html 也是黑屏，可能是显卡驱动问题
3. 尝试更新显卡驱动或使用不同的浏览器

### 检查WebGL支持

在控制台中输入：

```javascript
document.createElement('canvas').getContext('webgl2') !== null
```

如果返回 `true`，说明浏览器支持 WebGL。

## 性能问题

如果游戏运行卡顿：

1. 打开控制台查看FPS
2. 减少装饰立方体数量（在 `Game.js` 中修改循环次数）
3. 减少粒子系统数量

## 联系开发者

如果以上方法都无法解决问题，请：
1. 截图控制台的错误信息
2. 提供浏览器版本和操作系统信息

